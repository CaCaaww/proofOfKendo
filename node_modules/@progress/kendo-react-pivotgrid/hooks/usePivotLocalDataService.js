/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2025 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const _=require("react"),u=require("@progress/kendo-pivotgrid-common");function q(e){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(a,n,s.get?s:{enumerable:!0,get:()=>e[n]})}}return a.default=e,Object.freeze(a)}const t=q(_),z="aggregate",B="columns",M={dataField:z,columnsData:B},m="&",b=e=>{const[a,n]=t.useState(!0),[s,w]=t.useState(e.defaultColumnAxes||[]),[r,D]=t.useState(e.defaultRowAxes||[]),[d,P]=t.useState(e.defaultMeasureAxes||[]),[S,F]=t.useState(e.defaultSort||[]),[f,y]=t.useState(e.defaultFilter||[]),[h,R]=t.useState(new Map),v=t.useCallback(o=>{D(o.value)},[]),p=t.useCallback(o=>{w(o.value)},[]),j=o=>{P(o.value)},k=o=>{F(o.value)},L=o=>{y(o.value)},g=t.useMemo(()=>Array.from(u.rootFields(s).keys()).join(m),[s]),A=t.useMemo(()=>Array.from(u.rootFields(r).keys()).join(m),[r]),c=t.useCallback(o=>({key:o,...e.dimensions[o]}),[e.dimensions]),l=t.useMemo(()=>g?g.split(m).map(c):[],[g,c]),i=t.useMemo(()=>A?A.split(m).map(c):[],[A,c]),C=t.useMemo(()=>d.map(o=>e.measures.find(T=>String(T.name)===String(o.name))).filter(Boolean),[d,e.measures]);t.useEffect(()=>{n(!0),setTimeout(()=>{const o=u.createDataTree(e.data,i,l,C,M,f);R(o),n(!1)},0)},[e.data,i,l,C,f]);const O=t.useMemo(()=>u.createFlatSchemaDimensions(e.dimensions,e.measures),[e.dimensions,e.measures]),x=t.useMemo(()=>u.createLocalDataState({dataTree:h,rowSettings:i,columnSettings:l,rowAxes:r,columnAxes:s,measures:C,sort:S,fields:M}),[s,l,h,r,i,S]);return{pivotProps:{rowAxes:r,columnAxes:s,data:x.data,rows:x.rows,columns:x.columns,onRowAxesChange:v,onColumnAxesChange:p},configuratorProps:{sort:S,onSortChange:k,filter:f,onFilterChange:L,data:O,rowAxes:r,columnAxes:s,measureAxes:d,onRowAxesChange:v,onColumnAxesChange:p,onMeasureAxesChange:j},state:{loading:a}}},E=e=>{const a=b(e);return e.children(a)};exports.PivotLocalDataService=E;exports.usePivotLocalDataService=b;
